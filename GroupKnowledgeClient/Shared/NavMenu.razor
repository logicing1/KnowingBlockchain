@using GroupKnowledgeClient.State

@inject IGroupState _groupState;
@implements IDisposable;

<MudToolBar Class="justify-center">
    <MudTooltip Text="Connect to info on group." Color="Color.Secondary">
        <MudIconButton Icon="@Icons.Material.TwoTone.GroupAdd" Color="Color.Primary" Link="/connect" />
    </MudTooltip>
    <MudTooltip Text="Remove a group from this list" Color="Color.Secondary">
        <MudIconButton Icon="@Icons.Material.TwoTone.GroupRemove" Color="Color.Primary" Link="/disconnect" />
    </MudTooltip>
</MudToolBar>
<MudDivider Class="mb-3" />
<MudNavMenu>
    @foreach (var group in _groupState.List.OrderBy(g => g.Name))
    {
        var link = $"/questions/{group.Contract}";
        <MudNavLink Href=@link Match="NavLinkMatch.Prefix" Icon="@Icons.Material.TwoTone.Group">@group.Name</MudNavLink>
    }
</MudNavMenu>

@code {

    protected override void OnInitialized()
    {
        _groupState.Changed += StateHasChanged;
    }

    public void Dispose()
    {
        _groupState.Changed -= StateHasChanged;
    }

} 